(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1223:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),s=n.n(a),i=n(11),c=n.n(i),u=n(925),l=n(602),f=(n(8),n(714)),m=n(1216),p=n(5),g=n(587),d=n(296),h=n(575),v=function(e){var t=e.value,n=e.isLoading,r=e.onChange,a=e.onSubmit,s=e.classes,i=Object.values(t).every((function(e){return""!==e}));return o.a.createElement("form",{className:s.container,onSubmit:a},o.a.createElement(g.a,{label:"Username",value:t.username,name:"username",onChange:r,margin:"normal",fullWidth:!0,autoFocus:!0,autoComplete:"off"}),o.a.createElement(d.a,{onClick:a,variant:"outlined",color:"primary",fullWidth:!0,className:s.button,disabled:!i,type:"submit"},n?o.a.createElement(h.a,{size:20}):"Send Password"),o.a.createElement("p",{className:s.forgotContainer},o.a.createElement(m.a,{to:"/"},"Login Page")))};v.propTypes={value:s.a.object,isLoading:s.a.bool,onChange:s.a.func,onSubmit:s.a.func,classes:s.a.object};var b=Object(p.a)((function(e){return{container:{backgroundColor:"#fff",padding:"".concat(1.5*e.margin,"px ").concat(e.margin,"px"),width:450,borderRadius:6,margin:"0 auto"},button:{borderColor:e.palette.primary.main,marginTop:e.margin},forgotContainer:{textAlign:"center",marginTop:2*e.margin}}}))(v),y=n(715);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){k(a,r,o,s,i,"next",e)}function i(e){k(a,r,o,s,i,"throw",e)}s(void 0)}))}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #d0e1e8;\n"]);return C=function(){return e},e}var R=u.a.section(C()),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,r,a=_(s);function s(){var e;T(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(x(e=a.call.apply(a,[this].concat(n))),"isTokenSource",c.a.CancelToken.source()),E(x(e),"state",{form:{username:""},isLoading:!1,isSnackbarOpen:!1,snackbarMessage:""}),E(x(e),"onHandleChangeForm",(function(t){var n=e.state.form;n[t.target.name]=t.target.value,e.setState({form:n})})),E(x(e),"onHandleSubmitForm",function(){var t=w(regeneratorRuntime.mark((function t(n){var r,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.props.history,r=e.state.form,!Object.values(r).every((function(e){return""===e}))){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,e.setState({isLoading:!0}),t.next=10,f.a.onForgotPassword({cancelToken:e.isTokenSource.token,username:r.username});case 10:t.sent,e.setState({isLoading:!1}),e.onToggleSnackbar({message:"Email with password sent successfully!"}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),c.a.isCancel(t.t0)?console.log("Request canceled",t.t0.message):(o=t.t0.response.data,a=o.message,401!==(s=o.errorCode)&&500!==s||e.onToggleSnackbar({message:a}),e.setState({isLoading:!1}));case 18:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}()),E(x(e),"onToggleSnackbar",(function(t){var n=t.message,r=void 0===n?"Error":n;e.setState((function(e){return{isSnackbarOpen:!e.isSnackbarOpen,snackbarMessage:r}}))})),e}return t=s,(n=[{key:"componentWillUnmount",value:function(){this.isTokenSource.cancel("API Cancel")}},{key:"render",value:function(){var e=this.state,t=e.form,n=e.isLoading,r=e.isSnackbarOpen,a=e.snackbarMessage;return o.a.createElement(R,null,o.a.createElement(y.a,null),o.a.createElement(b,{value:t,isLoading:n,onChange:this.onHandleChangeForm,onSubmit:this.onHandleSubmitForm}),o.a.createElement(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:6e3,onClose:this.onToggleSnackbar,ContentProps:{"aria-describedby":"message-id"},message:o.a.createElement("span",{id:"message-id"},a)}))}}])&&O(t.prototype,n),r&&O(t,r),s}(r.Component);L.propTypes={history:s.a.object};t.default=L},714:function(e,t,n){"use strict";var r=n(11),o=n.n(r),a=n(8);function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}var u,l,f,m,p=function(e){var t=e.methodType;return{method:void 0===t?"GET":t,headers:{"Content-Type":"application/json"}}};t.a={onLogin:(m=c(regeneratorRuntime.mark((function e(t){var n,r,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),i="".concat(a.a,"/api/auth/login"),e.prev=2,e.next=5,o()(i,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return m.apply(this,arguments)}),onValidate:(f=c(regeneratorRuntime.mark((function e(t){var n,r,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=t.accessToken,s="".concat(a.a,"/something"),e.prev=2,e.next=5,o()(s,{method:"GET",headers:{access_token:r},cancelToken:n});case 5:return i=e.sent,c=i.data,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return f.apply(this,arguments)}),onRefresh:(l=c(regeneratorRuntime.mark((function e(t){var n,r,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),i="".concat(a.a,"/something"),e.prev=2,e.next=5,o()(i,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return l.apply(this,arguments)}),onForgotPassword:(u=c(regeneratorRuntime.mark((function e(t){var n,r,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),i="".concat(a.a,"/api/auth/forgotPassword"),e.prev=2,e.next=5,o()(i,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return u.apply(this,arguments)})}},715:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),s=n.n(a),i=n(5),c=function(e){var t=e.classes;return o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:"/images/logo_transparent.png",alt:"app logo",className:t.logo}))};c.propTypes={classes:s.a.object},t.a=Object(i.a)((function(e){return{heading:{color:"#fff",textAlign:"center",marginBottom:2*e.margin},logo:{width:380,heading:200,objectFit:"cover",marginBottom:2*e.margin}}}))(c)},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var r="http://fme.a1abilities.co.nz",o="http://fme.a1abilities.co.nz",a={set:function(e){var t=e.token,n=e.refreshToken,r=e.roleName,o=e.role_id,a=e.franchiseId,s=e.userName,i=e.userId,c=e.uid;sessionStorage.setItem("token",t),sessionStorage.setItem("refresh_token",n),sessionStorage.setItem("role_name",r),sessionStorage.setItem("role_id",o),sessionStorage.setItem("franchise_id",a),sessionStorage.setItem("user_name",s),sessionStorage.setItem("user_id",i),sessionStorage.setItem("uid",c)},remove:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("refresh_token"),sessionStorage.removeItem("role_name"),sessionStorage.removeItem("role_id"),sessionStorage.removeItem("user_name"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("uid"),sessionStorage.removeItem("franchise_id")},get:function(){return{token:sessionStorage.getItem("token"),refreshToken:sessionStorage.getItem("refresh_token"),roleName:sessionStorage.getItem("role_name"),role_id:sessionStorage.getItem("role_id"),franchiseId:sessionStorage.getItem("franchise_id"),userName:sessionStorage.getItem("user_name"),userId:sessionStorage.getItem("user_id"),uid:sessionStorage.getItem("uid")}},get notEmpty(){var e=null!==this.get().token,t=""!==this.get().token;return e&&t}}}}]);