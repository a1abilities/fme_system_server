(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1219:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(2),s=n.n(a),c=n(14),i=n.n(c),u=n(923),l=n(604),f=(n(9),n(718)),m=n(1212),p=n(5),g=n(603),d=n(297),h=n(574),v=function(e){var t=e.value,n=e.isLoading,r=e.onChange,a=e.onSubmit,s=e.classes,c=Object.values(t).every((function(e){return""!==e}));return o.a.createElement("form",{className:s.container,onSubmit:a},o.a.createElement(g.a,{label:"Username",value:t.username,name:"username",onChange:r,margin:"normal",fullWidth:!0,autoFocus:!0,autoComplete:"off"}),o.a.createElement(d.a,{onClick:a,variant:"outlined",color:"primary",fullWidth:!0,className:s.button,disabled:!c,type:"submit"},n?o.a.createElement(h.a,{size:20}):"Send Password"),o.a.createElement("p",{className:s.forgotContainer},o.a.createElement(m.a,{to:"/"},"Login Page")))};v.propTypes={value:s.a.object,isLoading:s.a.bool,onChange:s.a.func,onSubmit:s.a.func,classes:s.a.object};var b=Object(p.a)((function(e){return{container:{backgroundColor:"#fff",padding:"".concat(1.5*e.margin,"px ").concat(e.margin,"px"),width:450,borderRadius:6,margin:"0 auto"},button:{borderColor:e.palette.primary.main,marginTop:e.margin},forgotContainer:{textAlign:"center",marginTop:2*e.margin}}}))(v),y=n(719);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,r,o,a,s){try{var c=e[a](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){k(a,r,o,s,c,"next",e)}function c(e){k(a,r,o,s,c,"throw",e)}s(void 0)}))}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #d0e1e8;\n"]);return E=function(){return e},e}var C=u.a.section(E()),L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,e);var t,n,r,a,s=(t=c,function(){var e,n=j(t);if(R()){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return I(this,e)});function c(){var e;T(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(P(e=s.call.apply(s,[this].concat(n))),"isTokenSource",i.a.CancelToken.source()),x(P(e),"state",{form:{username:""},isLoading:!1,isSnackbarOpen:!1,snackbarMessage:""}),x(P(e),"onHandleChangeForm",(function(t){var n=e.state.form;n[t.target.name]=t.target.value,e.setState({form:n})})),x(P(e),"onHandleSubmitForm",function(){var t=w(regeneratorRuntime.mark((function t(n){var r,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.props.history,r=e.state.form,!Object.values(r).every((function(e){return""===e}))){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,e.setState({isLoading:!0}),t.next=10,f.a.onForgotPassword({cancelToken:e.isTokenSource.token,username:r.username});case 10:t.sent,e.setState({isLoading:!1}),e.onToggleSnackbar({message:"Email with password sent successfully!"}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),i.a.isCancel(t.t0)?console.log("Request canceled",t.t0.message):(o=t.t0.response.data,a=o.message,401!==(s=o.errorCode)&&500!==s||e.onToggleSnackbar({message:a}),e.setState({isLoading:!1}));case 18:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}()),x(P(e),"onToggleSnackbar",(function(t){var n=t.message,r=void 0===n?"Error":n;e.setState((function(e){return{isSnackbarOpen:!e.isSnackbarOpen,snackbarMessage:r}}))})),e}return n=c,(r=[{key:"componentWillUnmount",value:function(){this.isTokenSource.cancel("API Cancel")}},{key:"render",value:function(){var e=this.state,t=e.form,n=e.isLoading,r=e.isSnackbarOpen,a=e.snackbarMessage;return o.a.createElement(C,null,o.a.createElement(y.a,null),o.a.createElement(b,{value:t,isLoading:n,onChange:this.onHandleChangeForm,onSubmit:this.onHandleSubmitForm}),o.a.createElement(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:6e3,onClose:this.onToggleSnackbar,ContentProps:{"aria-describedby":"message-id"},message:o.a.createElement("span",{id:"message-id"},a)}))}}])&&_(n.prototype,r),a&&_(n,a),c}(r.Component);L.propTypes={history:s.a.object};t.default=L},718:function(e,t,n){"use strict";var r=n(14),o=n.n(r),a=n(9);function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t,n,r,o,a,s){try{var c=e[a](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)}))}}var u,l,f,m,p=function(e){var t=e.methodType;return{method:void 0===t?"GET":t,headers:{"Content-Type":"application/json"}}};t.a={onLogin:(m=i(regeneratorRuntime.mark((function e(t){var n,r,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),c="".concat(a.a,"/api/auth/login"),e.prev=2,e.next=5,o()(c,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return i=e.sent,u=i.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return m.apply(this,arguments)}),onValidate:(f=i(regeneratorRuntime.mark((function e(t){var n,r,s,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=t.accessToken,s="".concat(a.a,"/something"),e.prev=2,e.next=5,o()(s,{method:"GET",headers:{access_token:r},cancelToken:n});case 5:return c=e.sent,i=c.data,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return f.apply(this,arguments)}),onRefresh:(l=i(regeneratorRuntime.mark((function e(t){var n,r,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),c="".concat(a.a,"/something"),e.prev=2,e.next=5,o()(c,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return i=e.sent,u=i.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return l.apply(this,arguments)}),onForgotPassword:(u=i(regeneratorRuntime.mark((function e(t){var n,r,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cancelToken,r=s(t,["cancelToken"]),c="".concat(a.a,"/api/auth/forgotPassword"),e.prev=2,e.next=5,o()(c,Object.assign({},p({methodType:"POST"}),{cancelToken:n,data:r}));case 5:return i=e.sent,u=i.data,e.abrupt("return",u);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),function(e){return u.apply(this,arguments)})}},719:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),s=n.n(a),c=n(5),i=function(e){var t=e.classes;return o.a.createElement(r.Fragment,null,o.a.createElement("img",{src:"/images/logo_transparent.png",alt:"app logo",className:t.logo}))};i.propTypes={classes:s.a.object},t.a=Object(c.a)((function(e){return{heading:{color:"#fff",textAlign:"center",marginBottom:2*e.margin},logo:{width:380,heading:200,objectFit:"cover",marginBottom:2*e.margin}}}))(i)},9:function(e,t,n){"use strict";var r={"config-development":{API_URL:"http://localhost:3000",AUTH_URL:"http://localhost:3000"},"config-dev":{API_URL:"",AUTH_URL:""},"config-uat":{API_URL:"",AUTH_URL:""},"config-prod":{API_URL:"",AUTH_URL:""},get"development-local-stag"(){return this["config-development"]},get"production-production-dev"(){return this["config-dev"]},get"production-production-uat"(){return this["config-uat"]},get"production-production-prod"(){return this["config-prod"]}};n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c}));var o="".concat("production","-").concat("production","-").concat("uat");console.log("process.env.NODE_ENV",o);var a=r[o].API_URL,s=(r[o].AUTH_URL,r[o].API_URL),c={set:function(e){var t=e.token,n=e.refreshToken,r=e.roleName,o=e.role_id,a=e.franchiseId,s=e.userName,c=e.userId,i=e.uid;sessionStorage.setItem("token",t),sessionStorage.setItem("refresh_token",n),sessionStorage.setItem("role_name",r),sessionStorage.setItem("role_id",o),sessionStorage.setItem("franchise_id",a),sessionStorage.setItem("user_name",s),sessionStorage.setItem("user_id",c),sessionStorage.setItem("uid",i)},remove:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("refresh_token"),sessionStorage.removeItem("role_name"),sessionStorage.removeItem("role_id"),sessionStorage.removeItem("user_name"),sessionStorage.removeItem("user_id"),sessionStorage.removeItem("uid"),sessionStorage.removeItem("franchise_id")},get:function(){return{token:sessionStorage.getItem("token"),refreshToken:sessionStorage.getItem("refresh_token"),roleName:sessionStorage.getItem("role_name"),role_id:sessionStorage.getItem("role_id"),franchiseId:sessionStorage.getItem("franchise_id"),userName:sessionStorage.getItem("user_name"),userId:sessionStorage.getItem("user_id"),uid:sessionStorage.getItem("uid")}},get notEmpty(){var e=null!==this.get().token,t=""!==this.get().token;return e&&t}}}}]);